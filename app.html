<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>D&D Journal</title>
    
    <!-- PWA -->
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-title" content="D&D Journal">
    <link rel="manifest" href="manifest.json">
    <link rel="icon" href="favicon.svg">
    <link rel="apple-touch-icon" href="favicon.svg">
    
    <!-- Google Fonts for Nordic Minimalism Design -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Bitter:wght@100;300;400;500;600;700&family=Lora:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- CSS -->
    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="css/components/tabs.css">
    <link rel="stylesheet" href="css/components/character-summary.css">
    <link rel="stylesheet" href="css/components/ai-prompt.css">
    <link rel="stylesheet" href="css/components/navigation.css">
    <link rel="stylesheet" href="css/components/character-form.css">
    <link rel="stylesheet" href="css/components/sync-status.css">
    
    <!-- Import Map for YJS modules -->
    <script type="importmap">
    {
      "imports": {
        "yjs": "./node_modules/yjs/dist/yjs.mjs",
        "y-websocket": "./node_modules/y-websocket/src/y-websocket.js",
        "y-indexeddb": "./node_modules/y-indexeddb/src/y-indexeddb.js",
        "js-tiktoken": "./node_modules/js-tiktoken/dist/index.js",
        "js-tiktoken/ranks/cl100k_base": "./node_modules/js-tiktoken/dist/ranks/cl100k_base.js",
        "y-protocols/sync": "./node_modules/y-protocols/sync.js",
        "y-protocols/auth": "./node_modules/y-protocols/auth.js",
        "y-protocols/awareness": "./node_modules/y-protocols/awareness.js",
        "lib0/observable": "./node_modules/lib0/observable.js",
        "lib0/array": "./node_modules/lib0/array.js",
        "lib0/math": "./node_modules/lib0/math.js",
        "lib0/map": "./node_modules/lib0/map.js",
        "lib0/encoding": "./node_modules/lib0/encoding.js",
        "lib0/decoding": "./node_modules/lib0/decoding.js",
        "lib0/random": "./node_modules/lib0/random.js",
        "lib0/promise": "./node_modules/lib0/promise.js",
        "lib0/buffer": "./node_modules/lib0/buffer.js",
        "lib0/error": "./node_modules/lib0/error.js",
        "lib0/binary": "./node_modules/lib0/binary.js",
        "lib0/function": "./node_modules/lib0/function.js",
        "lib0/set": "./node_modules/lib0/set.js",
        "lib0/logging": "./node_modules/lib0/logging.js"
      }
    }
    </script>
    
    <style>
    /* Router-specific styles */
    .route-error {
        padding: 2rem;
        margin: 2rem;
        border: 1px solid #e74c3c;
        border-radius: 8px;
        background-color: #fdf2f2;
        color: #c0392b;
        text-align: center;
    }
    
    .route-error h2 {
        margin-top: 0;
        color: #e74c3c;
    }
    
    .route-error a {
        color: #3498db;
        text-decoration: none;
        font-weight: 500;
    }
    
    .route-error a:hover {
        text-decoration: underline;
    }
    
    /* Navigation styles for SPA */
    .main-navigation {
        position: sticky;
        top: 0;
        background: white;
        border-bottom: 1px solid #eee;
        padding: 1rem 0;
        margin-bottom: 2rem;
        z-index: 100;
    }
    
    .main-navigation__list {
        display: flex;
        gap: 2rem;
        list-style: none;
        margin: 0;
        padding: 0 2rem;
        justify-content: center;
    }
    
    .main-navigation__link {
        color: #2c3e50;
        text-decoration: none;
        font-weight: 500;
        padding: 0.5rem 1rem;
        border-radius: 4px;
        transition: background-color 0.2s ease;
    }
    
    .main-navigation__link:hover {
        background-color: #f8f9fa;
        text-decoration: none;
    }
    
    .main-navigation__link--active {
        background-color: #3498db;
        color: white;
    }
    </style>
</head>
<body>
    <main id="app-container">
        <!-- Global Navigation (persistent across routes) -->
        <nav class="main-navigation">
            <ul class="main-navigation__list">
                <li><a href="/" class="main-navigation__link">Journal</a></li>
                <li><a href="/character" class="main-navigation__link">Character</a></li>
                <li><a href="/settings" class="main-navigation__link">Settings</a></li>
            </ul>
        </nav>
        
        <!-- Dynamic content area - populated by router -->
        <div id="page-content">
            <!-- Page-specific content loaded here by router -->
        </div>
    </main>

    <!-- Initialize router -->
    <script type="module">
        import { initRouter } from './js/router.js';
        
        // Initialize router when DOM is ready
        document.addEventListener('DOMContentLoaded', () => {
            initRouter();
        });
    </script>
</body>
</html>