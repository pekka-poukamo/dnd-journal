<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <title>Chronicle - D&D Journal</title>
    <link rel="manifest" href="manifest.json">
    <link rel="icon" href="favicon.svg">
    <link rel="apple-touch-icon" href="favicon.svg">
    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="css/components/tabs.css">
    <!-- Import Map for YJS modules -->
    <script type="importmap">
    {
      "imports": {
        "yjs": "./node_modules/yjs/dist/yjs.mjs",
        "y-websocket": "./node_modules/y-websocket/src/y-websocket.js",
        "y-indexeddb": "./node_modules/y-indexeddb/src/y-indexeddb.js",
        "y-protocols/sync": "./node_modules/y-protocols/sync.js",
        "y-protocols/auth": "./node_modules/y-protocols/auth.js",
        "y-protocols/awareness": "./node_modules/y-protocols/awareness.js",
        "lib0/observable": "./node_modules/lib0/observable.js",
        "lib0/array": "./node_modules/lib0/array.js",
        "lib0/math": "./node_modules/lib0/math.js",
        "lib0/map": "./node_modules/lib0/map.js",
        "lib0/encoding": "./node_modules/lib0/encoding.js",
        "lib0/decoding": "./node_modules/lib0/decoding.js",
        "lib0/random": "./node_modules/lib0/random.js",
        "lib0/promise": "./node_modules/lib0/promise.js",
        "lib0/buffer": "./node_modules/lib0/buffer.js",
        "lib0/error": "./node_modules/lib0/error.js",
        "lib0/binary": "./node_modules/lib0/binary.js",
        "lib0/function": "./node_modules/lib0/function.js",
        "lib0/set": "./node_modules/lib0/set.js",
        "lib0/logging": "./node_modules/lib0/logging.js",
        "lib0/time": "./node_modules/lib0/time.js",
        "lib0/string": "./node_modules/lib0/string.js",
        "lib0/iterator": "./node_modules/lib0/iterator.js",
        "lib0/object": "./node_modules/lib0/object.js",
        "lib0/environment": "./node_modules/lib0/environment.js",
        "lib0/indexeddb": "./node_modules/lib0/indexeddb.js",
        "lib0/broadcastchannel": "./node_modules/lib0/broadcastchannel.js",
        "lib0/url": "./node_modules/lib0/url.js",
        "lib0/webcrypto": "./node_modules/lib0/webcrypto.js"
      }
    }
    </script>
</head>
<body>
    <header class="tabs">
        <div class="tabs__container">
            <nav class="tabs__nav">
                <a href="/" class="tabs__tab">Journal</a>
                <a href="/character.html" class="tabs__tab">Character</a>
                <a href="/chronicle.html" class="tabs__tab tabs__tab--active">Chronicle</a>
                <a href="/settings.html" class="tabs__tab">Settings</a>
            </nav>
        </div>
    </header>

    <main>
        <div class="container-narrow">
            <section id="so-far-section">
                <h2>Adventure So Far <span class="text-muted text-small">(closed parts)</span></h2>
                <div id="so-far-content">Loading...</div>
            </section>
            <section id="recent-section">
                <div class="section-header flex-row justify-between gap-8">
                    <h2 class="m-0">Recent Adventures <span class="text-muted text-small">(current open part)</span></h2>
                    <button id="regenerate-recent" class="btn btn-secondary">Regenerate Recent</button>
                </div>
                <div id="recent-content">Loading...</div>
            </section>
            <section id="parts-list-section">
                <h2>Parts</h2>
                <div id="parts-list">Loading...</div>
            </section>
        </div>
    </main>

    <script type="module" src="js/chronicle.js"></script>
    <script type="module" src="js/sw-register.js"></script>
</body>
</html>
