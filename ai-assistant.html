<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Assistant - D&D Journal</title>
    <link rel="stylesheet" href="css/main.css">
</head>
<body>
    <header>
        <div class="container">
            <div class="flex justify-between items-center">
                <div class="flex items-center gap-md">
                    <a href="index.html" class="button button--secondary">‚Üê Back to Dashboard</a>
                    <h1>AI Roleplay Assistant</h1>
                </div>
                <button id="api-settings-btn" class="button button--secondary">API Settings</button>
            </div>
        </div>
    </header>
    
    <main class="container">
        <div class="grid gap-lg">
            <!-- AI Assistant Form -->
            <section class="ai-form">
                <h2>ü§ñ Generate Roleplay Suggestions</h2>
                <p>Get AI-powered suggestions for character development, roleplay scenarios, and story ideas based on your character and recent journal entries.</p>
                
                <form id="ai-form" class="grid gap-lg">
                    <div class="grid grid--two-col gap-lg">
                        <div class="form-group">
                            <label for="ai-character-select" class="form-label">Character</label>
                            <select id="ai-character-select" name="characterId" class="form-input" required>
                                <option value="">Select Character</option>
                            </select>
                            <small class="form-help">Choose which character to get suggestions for</small>
                        </div>
                        
                        <div class="form-group">
                            <label for="prompt-type" class="form-label">Suggestion Type</label>
                            <select id="prompt-type" name="promptType" class="form-input">
                                <option value="roleplay">Roleplay Suggestions</option>
                                <option value="character">Character Development</option>
                                <option value="scenario">Story Scenarios</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="user-input" class="form-label">Describe the situation or question</label>
                        <textarea id="user-input" name="userInput" class="form-input" rows="4" 
                                  placeholder="Example: My character just discovered a mysterious artifact in an ancient tomb. How would they react?" required></textarea>
                        <small class="form-help">Be specific about the situation, emotion, or challenge you want suggestions for</small>
                    </div>
                    
                    <div class="flex gap-sm">
                        <button type="submit" id="generate-btn" class="button" disabled>
                            Generate Suggestions
                        </button>
                        <button type="button" id="clear-response" class="button button--secondary">
                            Clear Response
                        </button>
                    </div>
                </form>
            </section>
            
            <!-- AI Response Area -->
            <section id="ai-response-section">
                <div id="ai-response" class="ai-response hidden">
                    <div class="response-placeholder">
                        <p>üí° Click "Generate Suggestions" to get AI-powered roleplay ideas!</p>
                    </div>
                </div>
            </section>
            
            <!-- Quick Prompts -->
            <section>
                <h3>Quick Prompt Ideas</h3>
                <div class="grid grid--three-col gap-md">
                    <div class="ai-response">
                        <h4>üé≠ Roleplay Ideas</h4>
                        <ul>
                            <li>"How would my character negotiate with a hostile NPC?"</li>
                            <li>"My character is facing a moral dilemma about..."</li>
                            <li>"What would my character do in a tavern fight?"</li>
                        </ul>
                    </div>
                    
                    <div class="ai-response">
                        <h4>üåü Character Development</h4>
                        <ul>
                            <li>"Help me develop my character's backstory"</li>
                            <li>"What fears might my character have?"</li>
                            <li>"How can my character grow after this event?"</li>
                        </ul>
                    </div>
                    
                    <div class="ai-response">
                        <h4>üìñ Story Scenarios</h4>
                        <ul>
                            <li>"Create a side quest for my character"</li>
                            <li>"What challenges fit my character's level?"</li>
                            <li>"Generate an interesting NPC to interact with"</li>
                        </ul>
                    </div>
                </div>
            </section>
            
            <!-- Usage Tips -->
            <section>
                <h3>üí° Tips for Better Results</h3>
                <div class="ai-response">
                    <ul>
                        <li><strong>Be specific:</strong> Include details about the situation, setting, or emotions involved</li>
                        <li><strong>Provide context:</strong> Mention recent events from your journal entries</li>
                        <li><strong>Ask for options:</strong> Request multiple approaches or solutions</li>
                        <li><strong>Include constraints:</strong> Mention your character's personality, beliefs, or limitations</li>
                        <li><strong>Experiment:</strong> Try different prompt types for varied suggestions</li>
                    </ul>
                </div>
            </section>
        </div>
    </main>

    <!-- API Settings Modal -->
    <div id="api-settings-modal" class="modal hidden">
        <div class="modal-overlay">
            <div class="modal-content">
                <div class="modal-header">
                    <h3>AI Assistant Settings</h3>
                    <button id="close-api-settings" class="button button--secondary">&times;</button>
                </div>
                <div class="modal-body">
                    <div class="form-group">
                        <label for="openai-api-key" class="form-label">OpenAI API Key</label>
                        <input type="password" id="openai-api-key" class="form-input" 
                               placeholder="sk-...">
                        <small class="form-help">
                            Your API key is stored locally in your browser only. 
                            <a href="https://platform.openai.com/api-keys" target="_blank">Get your API key here</a>
                        </small>
                    </div>
                    
                    <div class="ai-response">
                        <h4>‚ÑπÔ∏è About the AI Assistant</h4>
                        <p>This feature uses OpenAI's GPT model to generate roleplay suggestions based on your character and journal entries. You need your own OpenAI API key to use this feature.</p>
                        
                        <p><strong>Cost:</strong> Typical usage costs $1-3 per month for personal use.</p>
                        
                        <p><strong>Privacy:</strong> Your API key and data are only stored locally in your browser. Nothing is sent to any servers except OpenAI's API.</p>
                    </div>
                </div>
                <div class="modal-actions">
                    <button id="save-api-key" class="button">Save API Key</button>
                    <button id="test-api-key" class="button button--secondary">Test Connection</button>
                </div>
            </div>
        </div>
    </div>

    <script type="module" src="js/pages/AIAssistant.js"></script>
</body>
</html>