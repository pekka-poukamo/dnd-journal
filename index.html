<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>D&D Journal</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="manifest" href="manifest.json">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="D&D Journal">
    <link rel="apple-touch-icon" href="icon-192.png">
</head>
<body>
    <div class="container">
        <header>
            <h1>D&D Journal</h1>
            <nav>
                <a href="index.html" class="nav-link active">Journal</a>
                <a href="character.html" class="nav-link">Character</a>
                <a href="settings.html" class="nav-link">Settings</a>
            </nav>
        </header>

        <main>
            <!-- Character Summary Section -->
            <section id="character-summary" class="character-summary">
                <h2>Character</h2>
                <div id="character-display" class="character-display">
                    <p id="character-simple-data">No character created yet. <a href="character.html">Create your character</a></p>
                </div>
            </section>

            <!-- AI Introspection Section -->
            <section id="ai-prompt-container" class="ai-section" style="display: none;">
                <h2>Character Introspection</h2>
                <div id="ai-prompt-text" class="ai-prompt"></div>
                <button id="regenerate-prompt-btn" onclick="regenerateAIPrompt()">Regenerate</button>
            </section>

            <!-- Entry Form -->
            <section class="entry-form-section">
                <h2>New Entry</h2>
                <form id="entry-form">
                    <input type="text" id="entry-title" placeholder="Entry title..." required>
                    <textarea id="entry-content" placeholder="What happened in your adventure?" required></textarea>
                    <button type="submit" id="add-entry-btn">Add Entry</button>
                </form>
            </section>

            <!-- Entries List -->
            <section class="entries-section">
                <h2>Journal Entries</h2>
                <div id="entries-list" class="entries-list">
                    <!-- Entries will be rendered here -->
                </div>
            </section>
        </main>
    </div>

    <!-- Import Map -->
    <script type="importmap">
    {
        "imports": {
            "yjs": "./node_modules/yjs/dist/yjs.js",
            "y-indexeddb": "./node_modules/y-indexeddb/dist/y-indexeddb.cjs",
            "y-websocket": "./node_modules/y-websocket/dist/y-websocket.cjs",
            "js-tiktoken": "./node_modules/js-tiktoken/dist/tiktoken.js"
        }
    }
    </script>

    <!-- Simple App Module -->
    <script type="module" src="js/app.js"></script>
</body>
</html>